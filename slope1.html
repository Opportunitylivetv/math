<!-- The <slope-1> custom element declaration.

  Attributes:
  Events:
  Methods:
-->

<dom-module id="slope-1">
  <style>
    input {
      padding: 0.2em;
      text-align: center;
    }
    .hide {
      display: none;
    }
  </style>
  <template>
    <p>
    y = {{m}}x+{{b}}
    </p>
    <p>
      What is the slope <input type=text name=m value="" id=m size=1 maxlength=1 inputmode=numeric> and the
      y-intercept <input type=text name=b value="" id=b size=1 maxlength=1 inputmode=numeric>?
    </p>
    <button on-click=_submit>Submit</button>
    <p id=incorrect class=hide>
      That is incorrect.
      <template is="dom-if" if="{{practice}}">
        The slope is {{b}} and the y-intercept is {{m}}.
      </template>
    </p>
    <p id=correct class=hide>
      That is correct!
    </p>
    <button id=continue class=hide on-click=_continue>Continue</button>
  </template>
</dom-module>

<script>
  Polymer({
    is: "slope-1",

    rint: function(min, max) {
      return Math.floor(Math.random() * (max - min)) + min;
    },

    ready: function() {
      this.set('b', this.rint(2, 9))
      this.set('m', this.rint(2, 9))
    },

    _submit: function() {
      var correct = +this.$.m.value == this.m && +this.$.b.value == this.b;
      this.fire('submit-response', {
        correct: correct,
        name: this.is,
        bubbles: true,
      });
      if (correct) {
        this.$.correct.classList.remove('hide');
      } else {
        this.$.incorrect.classList.remove('hide');
      }
      this.$.continue.classList.remove('hide');
    },

    _continue: function() {
      this.fire('continue', {
        bubbles: true,
      });
    },

    properties: {
      m: {
        type: Number,
        value: 2,
      },
      b: {
        type: Number,
        value: 2,
      },
      practice: {
        type: Boolean,
        value: false,
        reflectToAttribute: true,
      },
    },
  });
</script>
